<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        /* CSS for cart.html */
        header {
            display: flex;
            align-items: center;
            padding: 20px;
            background-color: #FFFFFF;
        }

.logo img {
  width: 300px; 
  height: auto;
}

nav {
  margin-left: auto; 
}

nav ul {
  list-style-type: none;
}

nav ul li {
  display: inline-block;
  margin-left: 20px;
}

nav ul li a {
  text-decoration: none;
  color: #333;
}

.dropdown-menu {
  display: none;
  position: absolute;
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.dropdown:hover .dropdown-menu {
  display: block;
}

.dropdown-menu li {
  padding: 10px;
  display: block;
}
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            border-bottom: 1px solid #ddd;
            padding: 20px 0;
        }

        .cart-item img {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            margin-right: 20px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-size: 18px;
            font-weight: bold;
            margin: 0;
        }

        .cart-item-details {
            font-size: 14px;
            margin: 5px 0;
        }

        .cart-item-price {
            font-size: 18px;
            font-weight: bold;
            margin: 5px 0;
        }

        .cart-item-quantity {
            margin-left: auto;
        }

        .cart-item-remove {
            color: #dc3545;
            cursor: pointer;
        }

        #total-price {
            font-size: 20px;
            font-weight: bold;
            margin-top: 20px;
        }

        #delivery-message {
            font-size: 16px;
            margin-top: 10px;
        }

        #payment-details {
            margin-top: 20px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }

        #payment-details h2 {
            margin-bottom: 10px;
        }

        #payment-details label {
            display: block;
            margin-bottom: 5px;
        }

        #payment-details input[type="text"],
        #payment-details input[type="number"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            box-sizing: border-box;
            font-size: 16px;
        }

        #payment-details select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            box-sizing: border-box;
            font-size: 16px;
        }

        #submit-payment {
            background-color: #008CBA;
            color: white;
            padding: 15px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            display: block;
        }

        #submit-payment:hover {
            background-color: #005f78;
        }

        @media screen and (max-width: 768px) {
        .logo img {
            width: 150px;
        }

        nav ul li {
            display: block; /* Display each navigation link as a block */
            margin: 10px 0; /* Add some vertical margin between links */
        }
    }
    .footer {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .footer a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .footer .social-icons i {
            font-size: 20px;
            margin: 0 5px;
        }
    </style>
</head>
<body>
    <header class="navigation">
        <div class="logo">
          <img src="MOB logo.jpg" alt="Company-logo">
        </div>
        <nav>
          <ul>
            <li><a href="home.html">Home</a></li>
            <li class="dropdown">
              <a href="#">Services &#9662;</a>
              <ul class="dropdown-menu">
                <li><a href="#">Read a Book Online</a></li>
                <li><a href="books.html">Buy a Book</a></li>
                <li><a href="#">Publish literature</a></li>
              </ul>
            </li>
            <li><a href="#">Resources</a></li>
            <li><a href="countries.html">Countries</a></li>
            <li><a href="#">Admin</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="profile.html">Profile</a></li>
            <li class="profile-icon">
                <div class="dropdown">
                    <a href="index.html" onclick="logout()"><i class="bi bi-box-arrow-right"></i> Logout</a>
                </div>
              <div class="dropdown">
                  <a href="profile.html"><i class="bi bi-person"></i></a>
              </div>
          </li>
          <li class="cart-icon"><a href="cart.html"><i class="bi bi-cart"></i></a></li>
          </ul>
        </nav>
      </header>
    <div class="container">
        <h1>Your Shopping Cart</h1>
        <div id="cart-items"></div>
        <div id="total-price"></div>
        <div id="delivery-message">The books will be delivered to the office branch in the selected city.</div>
        <div id="payment-details">
            <h2>Payment Details</h2>
            <label for="card-number">Card Number:</label>
            <input type="text" id="card-number" placeholder="XXXX - XXXX - XXXX - XXXX" pattern="[0-9]{4}[\s-]?[0-9]{4}[\s-]?[0-9]{4}[\s-]?[0-9]{4}" maxlength="19" required>
            <label for="expiration-date">Expiration Date:</label>
            <input type="text" id="expiration-date" placeholder="MM/YYYY" pattern="^(0[1-9]|1[0-2])\/?(2[2-9])?[0-9]{2}$" maxlength="7" required>
            <label for="cvv">CVV:</label>
            <input type="text" id="cvv" placeholder="XXX" pattern="[0-9]{3}" maxlength="3" required>
            <label for="location">Delivery Location:</label>
            <select id="location" required>
                <option value="">Select City</option>
                <optgroup label="Uganda">
                    <option value="Kampala">Kampala</option>
                    <option value="Gulu">Gulu</option>
                    <option value="Fort-Portal">Fort Portal</option>
                </optgroup>
                <optgroup label="Kenya">
                    <option value="Nairobi">Nairobi</option>
                    <option value="Mombasa">Mombasa</option>
                    <option value="Kisumu">Kisumu</option>
                </optgroup>
                <optgroup label="Tanzania">
                    <option value="Dodoma">Dodoma</option>
                    <option value="Dar-es-Salaam">Dar es Salaam</option>
                </optgroup>
                <option value="Rwanda">Kigali</option>
                <option value="Burundi">Bujumbura</option>
                <option value="South Sudan">Juba</option>
            </select>
            <button id="submit-payment">Submit Payment</button>
        </div>
    </div>

    <footer class="footer">
        <div class="social-icons">
            <a href="#"><i class="bi bi-twitter"></i></a>
            <a href="#"><i class="bi bi-facebook"></i></a>
            <a href="#"><i class="bi bi-instagram"></i></a>
        </div>
        <p>&copy; 2024 Mariifa Online Bookstore. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
        displayCart();
    });

    const cartItemsContainer = document.getElementById('cart-items');
    const totalPriceDiv = document.getElementById('total-price');
    const paymentDetailsForm = document.getElementById('payment-details');

    function displayCart() {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cartItemsContainer.innerHTML = '';
        let totalPrice = 0;

        cart.forEach((book, index) => {
            const itemDiv = document.createElement('div');
            itemDiv.classList.add('cart-item');

            const img = document.createElement('img');
            img.src = "Book covers/" + book.cover; // Update the path
            img.alt = book.title;
            itemDiv.appendChild(img);

            const itemInfoDiv = document.createElement('div');
            itemInfoDiv.classList.add('cart-item-info');

            const title = document.createElement('h2');
            title.classList.add('cart-item-title');
            title.textContent = book.title;
            itemInfoDiv.appendChild(title);

            const details = document.createElement('p');
            details.classList.add('cart-item-details');
            details.textContent = `Author: ${book.author} | Price: $${book.price} | Quantity: ${book.quantity || 1}`;
            itemInfoDiv.appendChild(details);

            const quantityInput = document.createElement('input');
            quantityInput.classList.add('cart-item-quantity');
            quantityInput.type = 'number';
            quantityInput.value = book.quantity || 1;
            quantityInput.min = 1;
            quantityInput.addEventListener('change', (event) => updateQuantity(event, index));
            itemInfoDiv.appendChild(quantityInput);

            const removeBtn = document.createElement('span');
            removeBtn.classList.add('cart-item-remove');
            removeBtn.textContent = 'Remove';
            removeBtn.addEventListener('click', () => removeFromCart(index));
            itemInfoDiv.appendChild(removeBtn);

            itemDiv.appendChild(itemInfoDiv);

            cartItemsContainer.appendChild(itemDiv);

            totalPrice += book.price * (book.quantity || 1);
        });

        totalPriceDiv.textContent = `Total Price: $${totalPrice.toFixed(2)}`;
    }

    function updateQuantity(event, index) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart[index].quantity = parseInt(event.target.value);
        localStorage.setItem('cart', JSON.stringify(cart));
        displayCart();
    }

    function removeFromCart(index) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        displayCart();
    }

    document.getElementById('submit-payment').addEventListener('click', function () {
        submitPayment();
    });

    function submitPayment() {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        if (cart.length === 0) {
            alert('Your cart is empty!');
        } else {
            let cardNumber = document.getElementById('card-number').value.trim();
            let expirationDate = document.getElementById('expiration-date').value.trim();
            let cvv = document.getElementById('cvv').value.trim();
            let location = document.getElementById('location').value.trim();
            if (!cardNumber || !expirationDate || !cvv || !location) {
                alert('Please fill in all payment and delivery details!');
            } else {
                // Simulate submission (replace with actual API call)
                simulatePaymentSubmission(cart, cardNumber, expirationDate, cvv, location);
            }
        }
    }

    function simulatePaymentSubmission(cart, cardNumber, expirationDate, cvv, location) {
        // Simulating payment submission
        // Note: In a real application, this data should be sent to a server for processing
        // and stored securely, and SSL should be enabled to ensure data encryption.
        const paymentDetails = {
            cart: cart,
            cardNumber: cardNumber,
            expirationDate: expirationDate,
            cvv: cvv,
            location: location
        };

        // Simulating asynchronous API call (e.g., using setTimeout)
        setTimeout(() => {
            // Show success message
            alert('Payment Successful!');
            // Redirect to checkout page
            window.location.href = 'home.html';
        }, 2000); // Simulate a 2-second delay
    }

    function logout() {
        // Perform logout actions here
        alert("Logged out successfully!");
    }

    // Limit card number input to 19 characters and add hyphens after every 4 characters
    const cardNumberInput = document.getElementById('card-number');
    cardNumberInput.addEventListener('input', function () {
        let value = this.value.replace(/[^\d]/g, '').slice(0, 19);
        value = value.replace(/(.{4})/g, '$1-');
        this.value = value;
        if (value.length === 19 && value.charAt(18) === '-') {
            this.value = value.slice(0, -1);
        }
    });
    
    const expirationDateInput = document.getElementById('expiration-date');
expirationDateInput.addEventListener('input', function (event) {
    let value = this.value.replace(/[^\d\/]/g, '').slice(0, 7);
    this.value = value; });

    // Limit CVV input to 3 characters
    const cvvInput = document.getElementById('cvv');
    cvvInput.addEventListener('input', function () {
        this.value = this.value.replace(/[^\d]/g, '').slice(0, 3);
    });
    </script>
</body>
</html>
